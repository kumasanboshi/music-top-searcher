# /implement - 実装コマンド

タスクを規模判定し、適切なフローで実装を進めます。

## 使い方
```
/implement <タスク内容>
/implement 検索結果のキャッシュ機能を追加
```

## 実行フロー

### Step 1: 規模判定

タスクを分析し、S/M/L を判定:

```
1. 影響を受けるファイルを Grep/Glob で特定
2. import/依存関係を追跡
3. ファイル数でサイズ決定
   - 1ファイル → S
   - 2-5ファイル → M
   - 6ファイル以上 → L
```

### Step 2: TodoWrite登録

規模に応じたステップを登録:

**Sの場合**:
```
- [ ] 変更実施
- [ ] 型チェック
- [ ] コミット
```

**Mの場合**:
```
- [ ] 影響範囲確認
- [ ] テスト作成（TDD: RED）
- [ ] 実装（TDD: GREEN）
- [ ] リファクタリング（TDD: REFACTOR）
- [ ] 品質チェック
- [ ] コミット
```

**Lの場合**:
```
- [ ] 設計レビュー（/design-review）
- [ ] タスク分解（各タスクをM以下に）
- [ ] タスク1: [内容]
- [ ] タスク2: [内容]
- [ ] ...
- [ ] 統合テスト
- [ ] 最終品質チェック
- [ ] コミット
```

### Step 3: 実装サイクル

各タスクで以下を実行:

```
┌─────────────────────────────────────┐
│  TDD サイクル                        │
│                                     │
│  RED: テスト作成（失敗することを確認）  │
│    ↓                                │
│  GREEN: 最小実装（テストをパス）       │
│    ↓                                │
│  REFACTOR: 品質向上                  │
│    ↓                                │
│  進捗更新（TodoWrite）               │
└─────────────────────────────────────┘
```

### Step 4: 品質チェック

実装完了後、/quality-check を実行:

```
Phase 1: TypeScript型チェック
Phase 2: 構造検証
Phase 3: テスト実行
Phase 4: 型安全性
Phase 5: 設計準拠
```

### Step 5: コミット

品質チェックがパスしたら:

```bash
git add <変更ファイル>
git commit -m "<type>: <subject>"
```

## エスカレーション判断

以下の場合は即座にエスカレーション:

- [ ] 仕様が曖昧
- [ ] 設計変更が必要
- [ ] 新規ライブラリの追加
- [ ] 複数の実装方法があり判断が必要

詳細は `/escalation` を参照。

## 出力形式

### 実装開始時
```markdown
## 実装計画

### タスク
<タスク内容>

### 規模判定
- 判定: M（中規模）
- 影響ファイル:
  - src/services/dataCache.ts（新規）
  - src/services/api.ts（修正）
  - src/__tests__/dataCache.test.ts（新規）

### 実行ステップ
1. [ ] テスト作成
2. [ ] 実装
3. [ ] 品質チェック
4. [ ] コミット
```

### 実装完了時
```markdown
## 実装完了報告

### 変更ファイル
| ファイル | 変更内容 |
|---------|---------|
| src/services/dataCache.ts | 新規作成 |
| src/services/api.ts | キャッシュ呼び出し追加 |

### テスト結果
- 新規テスト: 5件追加
- 全テスト: パス (15/15)

### 品質チェック
- 判定: approved

### コミット
`feat: 検索結果のキャッシュ機能を追加`
```

## 禁止事項

- [ ] 規模判定をスキップしない
- [ ] TodoWriteへの登録を省略しない
- [ ] テストなしで実装を完了としない
- [ ] 品質チェック前にコミットしない

## 関連スキル

- `/task-sizing` - 規模判定の詳細
- `/quality-check` - 品質チェックの詳細
- `/testing-guide` - TDDの詳細
- `/escalation` - エスカレーション基準
