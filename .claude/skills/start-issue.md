# /start-issue - Issue作業開始

指定されたIssue番号で作業を開始します。規模判定とTodoWrite連携により、効率的なワークフローを実現します。

## 使い方
```
/start-issue 2
/start-issue 15
```

## 実行内容

### Phase 1: 準備

1. **Issue内容を取得**
   ```bash
   gh issue view <番号>
   ```

2. **worktreeを作成**
   ```bash
   git worktree add ../work/issue-<番号> -b feature/issue-<番号>
   ```

3. **作業ディレクトリに移動して状況報告**
   - Issue内容のサマリー
   - 完了条件の確認
   - 依存関係の確認

### Phase 2: 規模判定（新機能）

4. **影響範囲の分析**
   ```
   - Issue内容から影響を受けるファイルを特定
   - Grep/Globで関連コードを検索
   - 依存関係を追跡
   ```

5. **規模判定**
   ```
   - S（小規模）: 1ファイル
   - M（中規模）: 2-5ファイル
   - L（大規模）: 6ファイル以上
   ```

### Phase 3: TodoWrite連携（新機能）

6. **TodoWriteにステップ登録**

   **Sの場合**:
   ```
   - [ ] Issue #XX: 変更実施
   - [ ] 型チェック
   - [ ] コミット
   - [ ] PR作成
   ```

   **Mの場合**:
   ```
   - [ ] Issue #XX: 影響範囲確認
   - [ ] テスト作成
   - [ ] 実装
   - [ ] 品質チェック
   - [ ] コミット
   - [ ] PR作成
   ```

   **Lの場合**:
   ```
   - [ ] Issue #XX: 設計レビュー
   - [ ] タスク分解
   - [ ] サブタスク1: [内容]
   - [ ] サブタスク2: [内容]
   - [ ] ...
   - [ ] 統合テスト
   - [ ] 最終品質チェック
   - [ ] コミット
   - [ ] PR作成
   ```

7. **関連ファイルのリストアップ**
   ```markdown
   ### 影響を受けるファイル
   | ファイル | 変更内容 |
   |---------|---------|
   | src/services/xxx.ts | 修正 |
   | src/__tests__/xxx.test.ts | 新規 |
   ```

## 出力形式

```markdown
## Issue #XX 作業開始

### Issue概要
<Issueのタイトルと説明>

### 完了条件
- [ ] 条件1
- [ ] 条件2

### 規模判定
- 判定: M（中規模）
- 影響ファイル数: 3

### 影響を受けるファイル
| ファイル | 変更内容 |
|---------|---------|
| src/xxx.ts | 修正 |

### 実行ステップ（TodoWrite登録済み）
1. [ ] テスト作成
2. [ ] 実装
3. [ ] 品質チェック
4. [ ] コミット
5. [ ] PR作成

### 注意事項
- 依存Issue: なし
- エスカレーション候補: なし
```

## 注意
- 依存するIssueがマージされているか確認
- 既存のworktreeがある場合はスキップ
- 規模がLの場合は設計レビューを先に実施
- 仕様が曖昧な場合は即座にエスカレーション

## 関連スキル
- `/task-sizing` - 規模判定の詳細
- `/implement` - 実装フロー
- `/finish-issue` - Issue完了時の処理
- `/escalation` - エスカレーション基準
